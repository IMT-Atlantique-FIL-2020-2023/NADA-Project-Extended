FROM golang

WORKDIR app

COPY . .

ENV NADA_SERVE_PORT ${NADA_SERVE_PORT}
ENV NADA_SERVE_LOGLEVEL ${NADA_SERVE_LOGLEVEL}
ENV NADA_SERVE_INFLUXDB_HOST ${NADA_SERVE_INFLUXDB_HOST}
ENV NADA_SERVE_INFLUXDB_TOKEN ${NADA_SERVE_INFLUXDB_TOKEN}
ENV NADA_SERVE_INFLUXDB_ORG ${NADA_SERVE_INFLUXDB_ORG}
ENV NADA_SERVE_INFLUXDB_BUCKET ${NADA_SERVE_INFLUXDB_BUCKET}

RUN go run cmd/nada-serve/main.go

# RUN go build cmd/nada-serve/main.go